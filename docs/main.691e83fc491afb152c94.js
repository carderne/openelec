(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"/nAh":function(e,t,n){e.exports=n.p+"292e7c8b5f895e3914165ab323e5b08e.png"},"0Ixh":function(e,t,n){var a={"./flag-burundi.png":"Zjgi","./flag-ethiopia.png":"Yqei","./flag-ghana.png":"azYX","./flag-haiti.png":"ad4P","./flag-kenya.png":"CY3q","./flag-lesotho.png":"2Nbg","./flag-rwanda.png":"3Mq3","./flag-senegal.png":"/nAh","./flag-somalia.png":"1CMh","./flag-tanzania.png":"dYww","./flag-zambia.png":"Hmri"};function o(e){var t=l(e);return n(t)}function l(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}o.keys=function(){return Object.keys(a)},o.resolve=l,e.exports=o,o.id="0Ixh"},"1CMh":function(e,t,n){e.exports=n.p+"e4fb547897408f5c2c0dddc2a1cb8d07.png"},"2Nbg":function(e,t,n){e.exports=n.p+"0d98026ebc584651825d1322c88459ce.png"},"3Mq3":function(e,t,n){e.exports=n.p+"6678d83dddc757f954db4b0bb0d22a1d.png"},CY3q:function(e,t,n){e.exports=n.p+"46d3050f454c1fbccc234cfd8608a6ee.png"},Hmri:function(e,t,n){e.exports=n.p+"ae92d1866186a37c9d6468d9ea92056a.png"},OMi8:function(e,t,n){},Yqei:function(e,t,n){e.exports=n.p+"a23baa9c295975fedfbc52ac7a257ac8.png"},Zjgi:function(e,t,n){e.exports=n.p+"326de9e30d4fabbf64c8af46d70f5e94.png"},ad4P:function(e,t,n){e.exports=n.p+"27a1d5435562ca443e9e25829f1cdaca.png"},azYX:function(e,t,n){e.exports=n.p+"721010fb118fdd9ba09d34b30b4a5d0b.png"},dYww:function(e,t,n){e.exports=n.p+"ec011cf3ef928d48ac146daff905a87a.png"},tjUo:function(e,t,n){"use strict";n.r(t);var a=n("EVdn"),o=n.n(a),l=n("4ZJM"),i=n.n(l),s=(n("rG3h"),n("KVSD")),r=n.n(s),c=n("E6f0"),d=n.n(c),p=(n("fCtr"),n("q4sD"),n("OisC"),n("khhO"),n("ntj8"),n("xOOu")),u=n.n(p);n("OMi8");const g={"plan-nat":{"grid-dist":{type:"single",default:"1",label:"Grid dist connected",max:"5",min:"0",step:"0.5",unit:"km",tooltip:"Consider clusters within this distance as already connected."},"demand-factor":{type:"single",default:"5",label:"Demand factor",max:"20",min:"1",step:"1",unit:"",tooltip:"Demand factor in the formula demand=factor*log(gdp)"},"min-pop":{type:"single",default:"100",label:"Minimum population",max:"1000",min:"0",step:"50",unit:"",tooltip:"Exclude from analysis villages with less that this population."},"demand-ppm":{type:"single",default:"6",label:"Demand",max:"100",min:"0",step:"2",unit:"kWh/p/month",tooltip:"The average electricity demand per person in all clusters."},"mg-gen-cost":{type:"single",default:"4000",label:"Minigrid gen cost",max:"10000",min:"0",step:"500",unit:"USD/kW",tooltip:"Installed cost of a minigrid system, excluding distribution."},"mg-lv-cost":{type:"single",default:"2",label:"Minigrid dist cost",max:"10",min:"0",step:"1",unit:"USD/m2",tooltip:"Minigrid distribution cost as a function of village size."},"grid-mv-cost":{type:"single",default:"50",label:"Grid MV wire cost",max:"200",min:"0",step:"10",unit:"USD/m",tooltip:"Grid MV lines extension cost."},"grid-lv-cost":{type:"single",default:"2",label:"Grid LV wire cost",max:"10",min:"0",step:"1",unit:"USD/m2",tooltip:"Local in-cluster grid distribution cost as a function of village size."}},"plan-loc":{"min-area":{type:"single",default:"30",label:"Minimum building size",max:"100",min:"0",step:"5",unit:"m2",tooltip:"Exclude from analysis buildings below this size."},demand:{type:"single",default:"10",label:"Demand",max:"100",min:"0",step:"2",unit:"kWh/person/month",tooltip:"Electricity demand per person."},tariff:{type:"single",default:"0.5",label:"Tariff",max:"1",min:"0",step:"0.05",unit:"USD/kWh",tooltip:"Tariff to be charged to consumers."},"gen-cost":{type:"single",default:"1000",label:"Generator cost",max:"10000",min:"0",step:"500",unit:"USD/kW",tooltip:"Installed cost of a minigrid system, excluding distribution."},"wire-cost":{type:"single",default:"10",label:"Wire cost",max:"50",min:"0",step:"5",unit:"USD/m",tooltip:"Cost of local distribution wires."},"conn-cost":{type:"single",default:"100",label:"Connection cost",max:"500",min:"0",step:"20",unit:"USD/building",tooltip:"The connection cost per building."},"opex-ratio":{type:"single",default:"2",label:"OPEX ratio",max:"10",min:"0",step:"1",unit:"%",tooltip:"Annual operating costs as a percentage of CAPEX."},years:{type:"single",default:"20",label:"Project life",max:"30",min:"0",step:"1",unit:"years",tooltip:"Years over which to amortise project."},"discount-rate":{type:"single",default:"6",label:"Discount rate",max:"20",min:"0",step:"1",unit:"%",tooltip:"For calculating NPV."}},"find-nat":{"pop-range":{type:"range",default:"[0,1e14]",label:"Pop range",max:"10000",min:"0",step:"100",unit:"",tooltip:"Filter to clusters within this range."},"grid-range":{type:"range",default:"[0,1e14]",label:"Grid distance",max:"40",min:"0",step:"1",unit:"km",tooltip:"Filter to clusters within this range."},"ntl-range":{type:"range",default:"[0.0,1e14]",label:"Night lights",max:"1.0",min:"0.0",step:"0.1",unit:"",tooltip:"Filter to clusters within this range."},"gdp-range":{type:"range",default:"[0,1e14]",label:"Economy",max:"1000",min:"0",step:"100",unit:"USD/capita",tooltip:"Filter to clusters within this range."},"travel-range":{type:"range",default:"[0,1e14]",label:"Travel time",max:"20",min:"0",step:"1",unit:"hours",tooltip:"Filter to clusters within this range."}}},f={"plan-nat":{"tot-cost":{label:"Total cost",unit:"USD"},"new-grid":{label:"New grid villages",unit:""},"new-off-grid":{label:"New off-grid villages",unit:""},"model-pop":{label:"Modelled pop",unit:""},"densify-pop":{label:"Densify pop",unit:""},"new-conn-pop":{label:"New grid pop",unit:""},"new-og-pop":{label:"Off-grid pop",unit:""}},"plan-loc":{npv:{label:"NPV",unit:"USD"},capex:{label:"CAPEX",unit:"USD"},opex:{label:"OPEX",unit:"USD/year"},income:{label:"Income",unit:"USD/year"},connected:{label:"Connections",unit:""},"gen-size":{label:"Generator size",unit:"kW"},"line-length":{label:"Total line length",unit:"m"}},"find-nat":{"num-clusters":{label:"Clusters found",unit:""}}},m={burundi:{bounds:[[28.204503241,-4.525353124],[31.633190859,-2.279839647]],pop:1052e4,"access-rate":.076,"access-urban":.497,"access-rural":.017},ethiopia:{bounds:[[32.627620026,-.106069626],[48.332146354,18.350369746]],pop:1049e5,"access-rate":.429,"access-urban":.854,"access-rural":.265},ghana:{bounds:[[-3.906271679,4.577887208],[1.842622619,11.334163511]],pop:2883e4,"access-rate":.793,"access-urban":.898,"access-rural":.666},kenya:{bounds:[[33.548264979,-4.964956591],[42.287539011,5.305705381]],pop:4969e4,"access-rate":.56,"access-urban":.776,"access-rural":.393},lesotho:{bounds:[[27.0344,-30.3513],[29.1263,-28.5838]],pop:2233e3,"access-rate":.297,"access-urban":.66,"access-rural":.157},haiti:{bounds:[[-74.4,18],[-71.6,20.1]],pop:1098e4,"access-rate":.438,"access-urban":.782,"access-rural":.028},rwanda:{bounds:[[28.32951654,-2.884785794],[31.4312638,-1.002637116]],pop:1221e4,"access-rate":.294,"access-urban":.8,"access-rural":.178},senegal:{bounds:[[-17.69820409,10.674148389],[-11.187452269,18.325782941]],pop:1585e4,"access-rate":.645,"access-urban":.877,"access-rural":.383},somalia:{bounds:[[40.105438727,-1.98799168],[52.288756833,12.330216161]],pop:1474e4,"access-rate":.299,"access-urban":.572,"access-rural":.116},tanzania:{bounds:[[29.0492525,-12.376973616],[40.7230475,-.354514384]],pop:5637e4,"access-rate":.328,"access-urban":.653,"access-rural":.169},zambia:{bounds:[[21.706712241,-19.101743648],[33.998362069,-7.248606732]],pop:1709e4,"access-rate":.272,"access-urban":.62,"access-rural":.027}},b="#474747",y={default:"#ffc14a",densify:"#377eb8",grid:"#4daf4a",offgrid:"#e41a1c",none:"#474747"},h={default:"#ffc14a",top:"#49006a",bottom:"#fcc5c0"},x={default:"#005824",mg:"#43bcc6",shs:"#f97fac"};var v=n("bljh");const w=n("zwvM"),k=function(e){let t={};return e.keys().map(n=>{t[n.replace("./","")]=e(n)}),t}(n("0Ixh"));w.API;let S,C,D,P,N=1,F=!0;let z;const j={},O={"plan-nat":"","plan-loc":"","find-nat":""},L={"plan-nat":"","plan-loc":"","find-nat":""},U="<p>Click on a cluster to optimise local network</p>",M='<button type="button" class="btn btn-warning btn-block" id="btn-zoom-out">Click to zoom out</button>';let T,E,I=!1;const J={type:"FeatureCollection",features:[]},G=["match",["get","type"],"densify",y.densify,"grid",y.grid,"offgrid",y.offgrid,"none",y.none,y.default],_={property:"score",stops:[[0,h.bottom],[1,h.top]],default:y.default};function B(){S.setLayoutProperty("mapbox-satellite","visibility","none"),function(){let e=[{id:"streets",name:"Standard"},{id:"satellite",name:"Satellite"}];for(let t in e){let n=e[t].id,a=e[t].name,o=document.createElement("a");o.href="#","streets"==n&&(o.className="active"),o.id=n,o.textContent=a,o.onclick=function(e){e.preventDefault(),e.stopPropagation();let t=e.target.id,n="streets"==t?"satellite":"streets",a="streets"==t?"none":"visible";S.setLayoutProperty("mapbox-satellite","visibility",a),document.getElementById(t).className="active",document.getElementById(n).className=""},document.getElementById("baseToggle").appendChild(o)}}(),S.addSource("clusters",{type:"geojson",data:J}),S.addLayer({id:"clusters",type:"fill",source:"clusters",paint:{"fill-color":G,"fill-opacity":.5}},"place-village"),S.addLayer({id:"clusters-outline",type:"line",source:"clusters",paint:{"line-color":G,"line-width":2}},"place-village"),S.addSource("grid",{type:"geojson",data:J}),S.addLayer({id:"grid",type:"line",source:"grid",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":b,"line-width":2}},"place-village"),S.addSource("buildings",{type:"geojson",data:J}),S.addLayer({id:"buildings",type:"fill",source:"buildings",paint:{"fill-color":x.default,"fill-opacity":.8}},"place-village"),S.on("mouseenter","clusters",V),S.on("mouseleave","clusters",(function(){S.getCanvas().style.cursor="",A.remove()})),S.on("click","clusters",X)}o()(document).ready((function(){-1!=window.location.href.indexOf("#modalVideo")&&o()("#modalVideo").modal("show");i.a.accessToken="pk.eyJ1IjoiY2FyZGVybmUiLCJhIjoiY2puMXN5cnBtNG53NDN2bnhlZ3h4b3RqcCJ9.eNjrtezXwvM7Ho1VSxo06w",S=new i.a.Map({container:"map",style:"mapbox://styles/carderne/cjpnxmz1e0o7s2suj6vs2thza"}),S.addControl(new i.a.ScaleControl({maxWidth:200,unit:"metric"}),"bottom-right"),S.addControl(new i.a.NavigationControl,"bottom-right"),o()("#go-home").click(oe),o()("#go-about").click(le),o()("#download-results").click(fe),o()("#go-plan").click(ee),o()("#go-plan-big").click(ee),o()("#go-find").click(te),o()("#go-find-big").click(te),o()("#change-country").click($),o()("#prev-step").click(Y),o()("#next-step").click(q);let e=o()("#country-list");for(let t in m){let n=ue(t);e.append('<a href="#" class="choose-country" id="'+t+'"><div class="card shadow my-3" style="width: 10rem;"><img class="card-img-top" src="'+k["flag-"+t+".png"]+'" alt="flag"><div class="card-body"><h5 class="card-title">'+n+"</h5></div></div></a><br>")}o()(".choose-country").click(ae),o()(".js-loading-bar").modal({backdrop:"static",show:!1}),o()("body").on("hidden.bs.modal",".modal",(function(){o()("video").trigger("pause")})),function(){let e=new URL(window.location.href);z=e.searchParams.get("country"),null!==z&&setTimeout((function(){$(),te(),ae()}),1e3)}()}));let A=new i.a.Popup({closeButton:!1,closeOnClick:!1});function V(e){S.getCanvas().style.cursor="pointer";let t=e.features[0].properties,n="<strong>Cluster details</strong><p>ID: "+t.fid+"<br>Pop: "+t.pop.toFixed(0)+"<br>Size: "+(t.area/1e6).toFixed(2)+" km2<br>NTL: "+t.ntl.toFixed(2)+"<br>GDP: "+t.gdp.toFixed(2)+" USD/p<br>Grid dist: "+t.grid.toFixed(2)+" km<br>Travel time: "+t.travel.toFixed(0)+" hrs</p>";void 0!==t.demand&&void 0!==t.coverage&&(n+="<p>Demand: "+t.demand.toFixed(0)+" kWh/p/month<br>Init coverage: "+(100*t.coverage).toFixed(0)+" %</p>"),A.setLngLat([e.lngLat.lng,e.lngLat.lat]).setHTML(n).addTo(S)}function Y(){if(N>1){N-=1;let e=parseInt(o()("#step-year").html());o()("#step-year").html(e-=5),W(N)}}function q(){if(N<4){N+=1;let e=parseInt(o()("#step-year").html());o()("#step-year").html(e+=5),W(N)}}function W(e){let t=["all",["<=","stage",e]];S.setFilter("network",t);let n=["match",["get","type_"+e],"densify",y.densify,"grid",y.grid,"offgrid",y.offgrid,"none",y.none,y.default];S.setPaintProperty("clusters","fill-color",n),S.setPaintProperty("clusters-outline","line-color",n),K("plan-nat",P[e]),S.resize()}function X(e){let t=S.queryRenderedFeatures(e.point);T=r()(t[0].geometry),function(){S.fitBounds(T,{padding:20}),S.setPaintProperty("clusters","fill-opacity",.1),re("dynamic-box"),o()("#map-announce").html(M),o()("#btn-zoom-out").click(H),o()("#download-results").html("Download results"),S.on("mouseenter","clusters",(function(){A.remove()})),D=!0;let e=function(e,t){let n=t[0],a=t[1],o=t[2],l=t[3],i=a+", "+n+", "+l+", "+o;return"https://overpass-api.de/api/interpreter?data=[out:json][timeout:15];(node["+e+"]("+i+");way["+e+"]("+i+");relation["+e+"]("+i+"););out body geom;"}("building",T);o.a.get(e,(function(e){let t=e.elements.length;if(t>2e3)o()("#map-announce").html("Choose a smaller village!"),de("run-model","disabled"),setTimeout(ie,2e3);else if(t<5)o()("#map-announce").html("Choose a village with more buildings!"),de("run-model","disabled"),setTimeout(ie,2e3);else{let t=d()(e);S.getSource("buildings").setData(t),pe("run-model","disabled")}})),R("plan-loc");let t=x;L["plan-loc"]=Q(t,{default:"Un-modelled",mg:"Mini-grid",shs:"SHS"}),o()("#summary").html(O["plan-loc"]),o()("#run-model").html("Run model")}()}function H(){S.flyTo({zoom:S.getZoom()-4}),S.on("mouseenter","clusters",V),S.setPaintProperty("clusters","fill-opacity",.5),o()("#map-announce").html(U),o()("#download-results").html("Download results");let e="plan"==C?"plan-nat":"find-nat";R(e),o()("#legend").html(L[e]),o()("#summary").html(O[e]),F&&ce("dynamic-box")}function R(e){j[e]||(j[e]={});let t=g[e],n=o()("#sliders");n.html("");for(let a in t){let l,i=t[a],s=i.type,r=i.default,c=i.label,d=i.tooltip,p=i.unit,u=parseFloat(i.min),g=parseFloat(i.max),f=parseFloat(i.step),m="sl-"+a,b="sl-"+a+"-val";if(j[e][a]||(j[e][a]=r),"range"==s){l=JSON.parse(j[e][a])[0]+" - ∞"}else l=j[e][a];n.append('<span class="ttip">'+c+': <span class="ttiptext">'+d+'</span><span id="'+b+'">'+l+"</span> "+p+"</span>"),n.append('<br><input id="'+m+'" type="text" data-slider-min="'+u+'" data-slider-max="'+g+'" data-slider-step="'+f+'" data-slider-value="'+j[e][a]+'"/><br>'),o()("#"+m).slider(),o()("#"+m).on("slide",(function(t){let n,l;if("range"==s){let e=t.value[0],a=t.value[1],o=a;a==g&&(a="∞",o=1e19),n=e+" - "+a,l="["+e+","+o+"]"}else n=t.value,l=o()("#"+m).val();o()("#"+b).text(n),j[e][a]=l,"find-nat"==e&&Z()}))}}function Z(){let e=j["find-nat"],t=JSON.parse(e["pop-range"]),n=JSON.parse(e["grid-range"]),a=JSON.parse(e["ntl-range"]),o=JSON.parse(e["gdp-range"]),l=JSON.parse(e["travel-range"]),i=["all",[">=","pop",t[0]],["<=","pop",t[1]],[">=","grid",n[0]],["<=","grid",n[1]],[">=","ntl",a[0]],["<=","ntl",a[1]],[">=","gdp",o[0]],["<=","gdp",o[1]],[">=","travel",l[0]],["<=","travel",l[1]]];S.setFilter("clusters",i),S.setFilter("clusters-outline",i)}function K(e,t){let n=f[e],a=o()("#summary");a.html('<h5 class="text">Summary results</h5>'),a.append("<p>");for(let e in n){let o=n[e],l=t[e],i=o.label,s=o.unit;l>1e9?(l=(l/1e9).toFixed(2),s="billion "+s):l>1e6?(l=(l/1e6).toFixed(2),s="million "+s):l=l.toFixed(0),a.append(i+": "+ge(l)+" "+s+"<br>")}if(a.append("</p>"),"plan-nat"==e){!function(e){var t={left:50,top:20,right:0,bottom:30};var n=200-t.left-t.right,a=180-t.top-t.bottom;o()("#summary").append('<hp class="text font-weight-bold">Newly connected population</hp>');var l=v.select("#summary").append("svg").attr("width","100%").attr("height",180).append("g").attr("transform","translate("+t.left+","+t.top+")"),i=l.append("g").attr("class","x axis").attr("transform","translate(0,"+a+")"),s=l.append("g").attr("class","y axis"),r=v.scale.ordinal().rangeBands([0,n],.2),c=v.scale.linear().range([a,0]),d=v.svg.axis().scale(r).orient("bottom").outerTickSize(0),p=v.svg.axis().scale(c).orient("left").ticks(3).tickFormat(v.format("s")).outerTickSize(0);r.domain(e.map((function(e){return e.type}))),c.domain([0,v.max(e,(function(e){return e.pop}))]),i.call(d).selectAll("text").style("font-size","14px").attr("dx","-0.4em").attr("dy","0.8em").attr("transform","rotate(-16)"),s.call(p).style("font-size","14px");var u=l.selectAll("rect").data(e);u.enter().append("rect").attr("width",r.rangeBand()),u.attr("x",(function(e){return r(e.type)})).attr("y",(function(e){return c(e.pop)})).attr("height",(function(e){return a-c(e.pop)})).attr("fill",(function(e){return"Densify"==(t=e.type)?y.densify:"Grid"==t?y.grid:y.offgrid;var t})),u.exit().remove()}([{type:"Densify",pop:t["densify-pop"]},{type:"Grid",pop:t["new-conn-pop"]},{type:"Off-grid",pop:t["new-og-pop"]}])}O[e]=a.html()}function Q(e,t){let n=o()("#legend");n.html('<h5 class="text">Map legend</h5>');for(let a in e){let o=t[a],l=e[a];n.append('<div><span class="legend-square" style="background-color: '+l+'"></span><span>'+o+"</span></div>")}return n.html()}function $(){o()("body").addClass("colorbg"),I||(B(),I=!0),re("landing"),re("explore"),re("about"),ce("countries"),D=!1}function ee(){C="plan",D=!1,se("go-plan"),o()("#run-model").html("Run model"),R("plan-nat"),F&&ce("dynamic-box"),o()("#summary").html(O["plan-nat"]),S.getLayer("network")&&S.setLayoutProperty("network","visibility","visible"),S.getLayer("clusters")&&(S.setPaintProperty("clusters","fill-color",G),S.setPaintProperty("clusters-outline","line-color",G),S.setFilter("clusters",null),S.setFilter("clusters-outline",null));let e=y;L["plan-nat"]=Q(e,{default:"Un-modelled",densify:"Densification",grid:"New connections",offgrid:"Off-grid",none:"None"}),z?(o()("body").removeClass("colorbg"),re("landing"),ce("explore"),re("about"),re("countries")):$()}function te(){C="find",D=!1,se("go-find"),o()("#run-model").html("Run model"),R("find-nat"),o()("#summary").html(O["find-nat"]),S.getLayer("network")&&S.setLayoutProperty("network","visibility","none"),S.getLayer("clusters")&&(S.setPaintProperty("clusters","fill-color",_),S.setPaintProperty("clusters-outline","line-color",_),Z());let e=h;L["find-nat"]=Q(e,{default:"Un-modelled",bottom:"Low priority",top:"High priority"}),z?(o()("body").removeClass("colorbg"),re("landing"),ce("explore"),re("dynamic-box"),re("about"),re("countries")):$()}let ne=!0;function ae(){o()("body").removeClass("colorbg"),void 0!==this&&(z=this.id),re("dynamic-box"),o()("#loading-bar").modal("show"),ne&&(ne=!1),o.a.ajax({url:"/data/"+z+"/grid.geojson",success:function(e){"string"==typeof e&&(e=JSON.parse(e)),S.getSource("grid").setData(e)},error:function(){ce("server-offline"),o()("#loading-bar").modal("hide"),o()("#loading-message").html("")}}),o.a.ajax({url:"/data/"+z+"/clusters.geojson",success:function(e){"string"==typeof e&&(e=JSON.parse(e)),S.getSource("clusters").setData(e),o()("#loading-bar").modal("hide"),o()("#loading-message").html("")},error:function(){ce("server-offline"),o()("#loading-bar").modal("hide"),o()("#loading-message").html("")}}),o()("#map-announce").html(U),o()(".country-name").html(ue(z)),o()("#country-overview").html('<h5 class="text">Country overview</h5>');let e=(m[z].pop/1e6).toFixed(2),t=(100*m[z]["access-rate"]).toFixed(2);o()("#country-overview").append("<p>Population: "+ge(e)+" million<br>Access rate: "+t+" %"),E=m[z].bounds;let n=S.cameraForBounds(E,{padding:-200});S.jumpTo(n),re("landing"),ce("explore"),re("about"),re("countries"),S.resize()}function oe(){o()("body").addClass("colorbg"),se(),ce("landing"),re("explore"),re("about"),re("countries")}function le(){o()("body").addClass("colorbg"),se(),re("landing"),re("explore"),ce("about"),re("countries")}function ie(){o()("#map-announce").html(M),o()("#btn-zoom-out").click(H)}function se(e){if(e){let t="go-find"==e?"go-plan":"go-find";de(e,"btn-primary"),pe(e,"btn-secondary"),de(t,"btn-secondary"),pe(t,"btn-primary")}else pe("go-plan","btn-secondary"),pe("go-find","btn-secondary"),de("go-plan","btn-primary"),de("go-find","btn-primary")}function re(e){de(e,"hidden")}function ce(e){pe(e,"hidden")}function de(e,t){let n=document.getElementById(e);n.classList.contains(t)||n.classList.add(t)}function pe(e,t){let n=document.getElementById(e);n.classList.contains(t)&&n.classList.remove(t)}function ue(e){return e.charAt(0).toUpperCase()+e.slice(1)}function ge(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function fe(){let e,t=new u.a;if(D)e="local_plan_"+z+"_bounds_"+T[0]+".zip",t.file("buildings.geojson",JSON.stringify(S.getSource("buildings")._data)),S.getSource("lv")&&t.file("lv.geojson",JSON.stringify(S.getSource("lv")._data)),t.file("summary.html",O["plan-loc"]);else{e="nat_"+C+"_"+z+".zip",t.file("clusters.geojson",JSON.stringify(S.getSource("clusters")._data)),"plan"==C&&S.getSource("network")&&t.file("network.geojson",JSON.stringify(S.getSource("network")._data));let n="plan"==C?"plan-nat":"find-nat";t.file("summary.html",O[n])}t.generateAsync({type:"base64"}).then((function(t){let n=document.getElementById("hiddenDownload");n.href="data:application/zip;base64,"+t,n.target="_blank",n.download=e,n.click()}))}},zwvM:function(e,t,n){e.exports={tag:"<small>beta</small>"}}},[["tjUo",1,2]]]);